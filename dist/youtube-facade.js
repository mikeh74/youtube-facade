(()=>{let e=e=>{if(!e||"string"!=typeof e){console.error("addPreconnect: Invalid URL");return}try{let t=document.createElement("link");t.rel="preconnect",t.href=e,document.head.appendChild(t)}catch(e){console.error("addPreconnect: Failed to add preconnect link",e)}},t=(()=>{let t=!1,o=["https://www.youtube-nocookie.com","https://www.google.com"];return()=>{t||(o.forEach(t=>e(t)),t=!0)}})();function o(){return window.innerWidth<600&&navigator.userAgent.includes("Mobi")}function r(e,t,o,n,a=!1){console.log(e,t,o,n,a);let l=e===document;if(!l&&!(e instanceof HTMLElement)){console.error("delegateEvent: Invalid parent element");return}if("string"!=typeof t||"string"!=typeof o||"function"!=typeof n){console.error("delegateEvent: Invalid arguments");return}(l?document:e).addEventListener(t,function(e){let t=e.target.closest(o);t&&(l||this.contains(t))&&n.call(t,e)},a)}function n(e){e.target.playVideo()}let a=!1,l=null;async function u(){return a?Promise.resolve(window.YT):l||(l=new Promise((e,t)=>{try{var o=document.createElement("script");o.src="https://www.youtube.com/iframe_api",o.onerror=e=>{console.error("YouTube Iframe API script failed to load",e),t(Error("YouTube Iframe API script failed to load"))};var r=document.getElementsByTagName("script")[0];if(!r||!r.parentNode){console.error("No script tag found in document for YouTube API insertion"),t(Error("No script tag found in document for YouTube API insertion"));return}r.parentNode.insertBefore(o,r),window.onYouTubeIframeAPIReady=()=>{let o=window.YT;if(!o){t(Error("YouTube Iframe API did not initialize correctly"));return}a=!0,e(o)}}catch(e){console.error("Error loading YouTube Iframe API",e),t(e)}}))}async function c(e,t,o){if(!e)throw Error("createYouTubePlayer: elementId is required");if(!t||"string"!=typeof t)throw Error("createYouTubePlayer: videoId is required and must be a string");try{return new(await u()).Player(e,{width:"720",height:"405",videoId:t,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",playerVars:o,events:{onReady:n}})}catch(e){throw console.error("createYouTubePlayer: Failed to create player",e),e}}document.addEventListener("DOMContentLoaded",()=>{let e=document.createElement("div");e.classList.add("youtube-facade-modal"),e.innerHTML=`
      <div class="youtube-facade-modal-content">
        <button class="youtube-facade-modal-close" aria-label="Close modal">
          <svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
            <path class="youtube-facade-model-close-svg" fill="#ffffff" d="M 16.830797 20.000301 L 10.000151 13.16957 L 3.169428 20.000301 L -0 16.830883 L 6.830741 10.000151 L -0 3.169418 L 3.169428 0 L 10.000151 6.830732 L 16.830797 0 L 20 3.169418 L 13.16958 10.000151 L 20 16.830883 Z"/>
          </svg>
        </button>
        <div class="youtube-facade-modal-content-inner">
          <div id="youtube-facade-modal-placeholder" class="youtube-facade-modal-inner"></div>
        </div>
      </div>
    `,document.body.appendChild(e),document.querySelectorAll(".youtube-facade-modal-close").forEach(e=>{e.addEventListener("click",()=>{i()})}),document.addEventListener("keydown",e=>{("Escape"===e.key||"Esc"===e.key)&&i()})});let d=()=>{let e=document.querySelector(".youtube-facade-modal");if(!e){console.error("toggleModal: Modal not found");return}e.classList.toggle("youtube-facade-modal-active")},i=()=>{requestAnimationFrame(()=>{let e=document.querySelector(".youtube-facade-modal"),t=document.querySelector("#youtube-facade-modal-placeholder");t&&(t.innerHTML=""),e&&e.classList.remove("youtube-facade-modal-active")})};window.youtubeFacade=({selector:e=".youtube-facade",muteForAutoplay:n=!0}={})=>{let a={playsinline:1,autoplay:1,rel:0};n&&o()&&(a.mute=1),r(document,"click",e,t=>{t.preventDefault();let r=t.target.closest(e);if(!r){console.error("youtubeFacade: Clicked element not found for selector",e);return}(function(e,t){if(!e||!(e instanceof HTMLElement)){console.error("handleVideoClick: Invalid element");return}let r=function(e){if(!e||!(e instanceof HTMLElement))return console.error("getYoutubeVideoId: Invalid element"),null;let t=e.getAttribute("data-youtube-id");if(t)return t;let o=e.getAttribute("href");if(!o)return null;try{t=new URL(o).searchParams.get("v")}catch(e){return console.error("getYoutubeVideoId: Failed to parse href",e),null}return t}(e);if(!r){console.error("handleVideoClick: No videoId found");return}let n=e.hasAttribute("data-use-youtube-api")||navigator.vendor.includes("Apple")||navigator.userAgent.includes("Mobi");e.hasAttribute("data-mute-for-mobile")&&o()&&(t.mute=1),n?function(e,t,o){if(!e||!(e instanceof HTMLElement)){console.error("renderYoutubePlayer: Invalid element");return}let r=e.getAttribute("data-youtube-modal"),n=e;if(r){let e=document.getElementById("youtube-facade-modal-placeholder");if(!e){console.error("renderYoutubePlayer: Modal placeholder not found");return}let t=document.createElement("div");t.classList.add("youtube-facade-iframe"),e.appendChild(t),n=t,d()}else{let t=e.getAttribute("data-target");if(t){let e=document.querySelector(t);e?n=e:console.error("renderYoutubePlayer: Target element not found for selector:",t)}}c(n,t,o).then(e=>{window.yfplayer=e}).catch(e=>{console.error("renderYoutubePlayer: Failed to create YouTube player",e)})}(e,r,t):function(e,t,o){if(!e||!(e instanceof HTMLElement)){console.error("renderYouTubeIframe: Invalid element");return}let r=function(e,t){if(!e||"string"!=typeof e)return console.error("createYouTubeIframe: Invalid videoId"),null;let o=new URLSearchParams(t).toString(),r=document.createElement("iframe");return r.setAttribute("src",`https://www.youtube-nocookie.com/embed/${e}?${o}`),r.setAttribute("width","720"),r.setAttribute("height","405"),r.setAttribute("class","youtube-facade-iframe"),r.setAttribute("frameborder","0"),r.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),r.setAttribute("allowfullscreen",""),r}(t,o);if(e.getAttribute("data-youtube-modal")){d();let e=document.querySelector("#youtube-facade-modal-placeholder");if(!e){console.error("renderYouTubeIframe: Modal content not found");return}e.appendChild(r)}else{let t=e.getAttribute("data-target");if(t){let o=document.querySelector(t);o?o.replaceWith(r):(console.error("renderYouTubeIframe: Target element not found for selector:",t),e.replaceWith(r))}else e.replaceWith(r)}}(e,r,t)})(r,a)}),r(document,"focusin",e,t,{once:!0}),document.querySelectorAll(e).forEach(e=>{e.addEventListener("pointerover",t,{once:!0})})}})();
//# sourceMappingURL=youtube-facade.js.map
