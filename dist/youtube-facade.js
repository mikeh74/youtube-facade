(()=>{let e=e=>{if(!e||"string"!=typeof e){console.error("addPreconnect: Invalid URL");return}try{let t=document.createElement("link");t.rel="preconnect",t.href=e,document.head.appendChild(t)}catch(e){console.error("addPreconnect: Failed to add preconnect link",e)}},t=(()=>{let t=!1,r=["https://www.youtube-nocookie.com","https://www.google.com"];return()=>{t||(r.forEach(t=>e(t)),t=!0)}})();function r(){return window.innerWidth<600&&navigator.userAgent.includes("Mobi")}function o(e,t,r,n,a=!1){console.log(e,t,r,n,a);let l=e===document;if(!l&&!(e instanceof HTMLElement)){console.error("delegateEvent: Invalid parent element");return}if("string"!=typeof t||"string"!=typeof r||"function"!=typeof n){console.error("delegateEvent: Invalid arguments");return}(l?document:e).addEventListener(t,function(e){let t=e.target.closest(r);t&&(l||this.contains(t))&&n.call(t,e)},a)}function n(e){e.target.playVideo()}let a=!1,l=null;async function u(){return a?Promise.resolve(window.YT):l||(l=new Promise((e,t)=>{try{var r=document.createElement("script");r.src="https://www.youtube.com/iframe_api",r.onerror=e=>{console.error("YouTube Iframe API script failed to load",e),t(Error("YouTube Iframe API script failed to load"))};var o=document.getElementsByTagName("script")[0];if(!o||!o.parentNode){console.error("No script tag found in document for YouTube API insertion"),t(Error("No script tag found in document for YouTube API insertion"));return}o.parentNode.insertBefore(r,o),window.onYouTubeIframeAPIReady=()=>{let r=window.YT;if(!r){t(Error("YouTube Iframe API did not initialize correctly"));return}a=!0,e(r)}}catch(e){console.error("Error loading YouTube Iframe API",e),t(e)}}))}async function c(e,t,r){if(!e)throw Error("createYouTubePlayer: elementId is required");if(!t||"string"!=typeof t)throw Error("createYouTubePlayer: videoId is required and must be a string");try{return new(await u()).Player(e,{width:"720",height:"405",videoId:t,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",playerVars:r,events:{onReady:n}})}catch(e){throw console.error("createYouTubePlayer: Failed to create player",e),e}}document.addEventListener("DOMContentLoaded",()=>{let e=document.createElement("div");e.classList.add("youtube-facade-modal"),e.innerHTML=`
      <div class="youtube-facade-modal-content">
        <button class="youtube-facade-modal-close" aria-label="Close modal">
          <svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
            <path class="youtube-facade-model-close-svg" fill="#ffffff" d="M 16.830797 20.000301 L 10.000151 13.16957 L 3.169428 20.000301 L -0 16.830883 L 6.830741 10.000151 L -0 3.169418 L 3.169428 0 L 10.000151 6.830732 L 16.830797 0 L 20 3.169418 L 13.16958 10.000151 L 20 16.830883 Z"/>
          </svg>
        </button>
        <div class="youtube-facade-modal-content-inner">
          <div id="youtube-facade-modal-placeholder" class="youtube-facade-modal-inner"></div>
        </div>
      </div>
    `,document.body.appendChild(e),document.querySelectorAll(".youtube-facade-modal-close").forEach(e=>{e.addEventListener("click",()=>{i()})}),document.addEventListener("keydown",e=>{("Escape"===e.key||"Esc"===e.key)&&i()})});let d=()=>{let e=document.querySelector(".youtube-facade-modal");if(!e){console.error("toggleModal: Modal not found");return}e.classList.toggle("youtube-facade-modal-active")},i=()=>{requestAnimationFrame(()=>{let e=document.querySelector(".youtube-facade-modal"),t=document.querySelector("#youtube-facade-modal-placeholder");t&&(t.innerHTML=""),e&&e.classList.remove("youtube-facade-modal-active")})};window.youtubeFacade=({selector:e=".youtube-facade",muteForAutoplay:n=!0}={})=>{let a={playsinline:1,autoplay:1,rel:0};n&&r()&&(a.mute=1),o(document,"click",e,t=>{t.preventDefault();let o=t.target.closest(e);if(!o){console.error("youtubeFacade: Clicked element not found for selector",e);return}(function(e,t){if(!e||!(e instanceof HTMLElement)){console.error("handleVideoClick: Invalid element");return}let o=function(e){if(!e||!(e instanceof HTMLElement))return console.error("getYoutubeVideoId: Invalid element"),null;let t=e.getAttribute("data-youtube-id");if(t)return t;let r=e.getAttribute("href");if(!r)return null;try{t=new URL(r).searchParams.get("v")}catch(e){return console.error("getYoutubeVideoId: Failed to parse href",e),null}return t}(e);if(!o){console.error("handleVideoClick: No videoId found");return}let n=e.hasAttribute("data-use-youtube-api")||navigator.vendor.includes("Apple")||navigator.userAgent.includes("Mobi");e.hasAttribute("data-mute-for-mobile")&&r()&&(t.mute=1),n?function(e,t,r){if(!e||!(e instanceof HTMLElement)){console.error("renderYoutubePlayer: Invalid element");return}let o=e.getAttribute("data-youtube-modal"),n=e;if(o){let e=document.getElementById("youtube-facade-modal-placeholder");if(!e){console.error("renderYoutubePlayer: Modal placeholder not found");return}let t=document.createElement("div");t.classList.add("youtube-facade-iframe"),e.appendChild(t),n=t,d()}else{let t=e.getAttribute("data-target");if(t)try{let e=document.querySelector(t);e?n=e:console.warn(`renderYoutubePlayer: Target element not found for selector "${t}", using original element`)}catch(e){console.error(`renderYoutubePlayer: Invalid selector "${t}"`,e)}}c(n,t,r).then(e=>{window.yfplayer=e}).catch(e=>{console.error("renderYoutubePlayer: Failed to create YouTube player",e)})}(e,o,t):function(e,t,r){if(!e||!(e instanceof HTMLElement)){console.error("renderYouTubeIframe: Invalid element");return}let o=function(e,t){if(!e||"string"!=typeof e)return console.error("createYouTubeIframe: Invalid videoId"),null;let r=new URLSearchParams(t).toString(),o=document.createElement("iframe");return o.setAttribute("src",`https://www.youtube-nocookie.com/embed/${e}?${r}`),o.setAttribute("width","720"),o.setAttribute("height","405"),o.setAttribute("class","youtube-facade-iframe"),o.setAttribute("frameborder","0"),o.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),o.setAttribute("allowfullscreen",""),o}(t,r);if(e.getAttribute("data-youtube-modal")){d();let e=document.querySelector("#youtube-facade-modal-placeholder");if(!e){console.error("renderYouTubeIframe: Modal content not found");return}e.appendChild(o)}else{let t=e.getAttribute("data-target"),r=e;if(t)try{let e=document.querySelector(t);e?r=e:console.warn(`renderYouTubeIframe: Target element not found for selector "${t}", using original element`)}catch(e){console.error(`renderYouTubeIframe: Invalid selector "${t}"`,e)}r.replaceWith(o)}}(e,o,t)})(o,a)}),o(document,"focusin",e,t,{once:!0}),document.querySelectorAll(e).forEach(e=>{e.addEventListener("pointerover",t,{once:!0})})}})();
//# sourceMappingURL=youtube-facade.js.map
